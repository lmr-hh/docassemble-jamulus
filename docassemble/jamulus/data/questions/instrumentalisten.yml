---
features:
  navigation: true
  hide navbar: false
  hide standard menu: true
  labels above fields: true
  javascript: [actions.js]
---
modules:
  - .automate
---
# Die Metadaten konfigurieren das Erscheinungsbild der Anmeldungen (z.B. den
# Titel). Mögliche Felder sind hier dokumentiert:
# https://docassemble.org/docs/initial.html#metadata
metadata:
  title: Zusätzliche Informationen zum Jamulus-Workshop
  tab title: Jamulus-Workshop
  short title: Jamulus-Workshop
  logo:
    <img src="https://www.lmr-hh.de/wp-content/uploads/2020/03/Landesmusikrat-Hamburg-Negativ.svg"
         height="27">
  description:
    Von Instrumentalisten werden für den Jamulus-Workshop zusätzliche Informationen abgefragt.
  exit url: https://www.lmr-hh.de/save-the-date-workshop-online-proben-mit-jamulus/
  revision_date: 2021-05-13
---
# In diesem Abschnitt werden die Anmeldungen sowie die Automatisierung
# konfiguriert. Die einzelnen Felder sind separat dokumentiert.
variable name: Tabelle
data:
  ID: 1ynQ8lxHxZJXS3XMJf2Jsae5k_O6TvuaZ87jETxQ4vMk
  Blatt-ID: 1223040774
  Bereich: Anmeldungen
---
code: |
  if not save_data_task.ready():
    Warten
  else:
    Abschicken = True
---
# The member_data forms is the data that is available to be put in spreadsheets.
# The dictionary keys are compared to spreadsheet headings. The comparison is
# case-insensitive.
code: |
  member_data = {
    "Instrument": instrument if defined('instrument') else '',
    "Niveau": niveau if defined('niveau') else '',
    "Alter": alter if defined('alter') else '',
    "Mitglied": member if defined('member') else '',
    "Ensemble": ensemble if defined('ensemble') else ''
  }
---
# A task that adds a row to the Anmeldungen.
code: |
  save_data_task = background_action(
    'append_to_spreadsheet',
    'refresh',
    spreadsheet=Tabelle["ID"],
    range=Tabelle["Bereich"]
  )
---
# This action saves member_data to a spreadsheet configured via action arguments.
# All arguments are required.
# - spreadsheet: This argument provides the spreadsheet ID
# - range: This argument provides the range in the spreadsheet where the data
#          should be inserted.
event: append_to_spreadsheet
code: |
  result = add_spreadsheet_row(
    action_argument('spreadsheet'),
    action_argument('range'),
    member_data
  )
  background_response(result)
---
# Die Reihenfolge, in der Fragen gestellt werden. Dies ist eine erweiterte
# Funktion, die nicht leichtfertig verändert werden sollte.
mandatory: True
code: |
  Daten
  Abschicken
  Fertig
---
field: Daten
question: Zusätzliche Angaben zum Jamulus-Workshop
subquestion: |
  Liebe Teilnehmenden am Jamulus-Workshop,

  um den Praxisteil des Workshops für Instrumentalist\*innen so gut wie möglich auf die
  Bedürfnisse der Teilnehmenden abzustimmen, möchten wir Sie bitten, folgende Fragen zu
  beantworten.
fields:
  - Welches Instrument spielen Sie?: instrument
    required: false
  - Wie schätzen Sie Ihr eigenes Können ein?: niveau
    required: false
    choices:
      - Anfänger\*in
      - Fortgeschrittene\*r
      - Profi
  - Wie alt sind Sie?: alter
    datatype: integer
    required: false
  - Gehören Sie einem Orchester/Band/Musikgruppe an?: member
    datatype: yesnoradio
    required: false
  - Name des Ensembles: ensemble
    show if: member
    required: false
---
event: Warten
prevent going back: True
question: Daten absenden...
subquestion:
  Ihre Angaben werden abgeschickt. Bitte schließen Sie noch **nicht** dieses Fenster.
---
event: Fertig
prevent going back: True
question: Fertig
subquestion: |
  Vielen Dank für die weiteren Informationen. Wir freuen uns schon darauf, Sie bei dem
  Workshop zu sehen.
buttons:
  - Fertig: exit
---